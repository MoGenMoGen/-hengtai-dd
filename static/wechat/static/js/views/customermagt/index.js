webpackJsonp([17],{611:function(e,t,i){i(826),i(827);var n=i(7)(i(716),i(984),"data-v-4084caf2",null);e.exports=n.exports},688:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(3),s=i(5),a=i(21),o=i.n(a),l=i(22),r=(i.n(l),i(611)),c=i.n(r),u=i(83);n.default.use(s.a),n.default.use(o.a),n.default.use(u.c),new n.default({render:function(e){return e(c.a)}}).$mount("#container")},716:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(38),s=i.n(n),a=i(10),o=i.n(a),l=i(9),r=i.n(l),c=i(1),u=i.n(c);t.default={data:function(){return{loading:!1,finished:!1,isfirstload:!0,total:0,info:{nameAndphone:"",business:"",beginFollowUpTime:"",endFollowUpTime:"",nature:"",saler:"",intentionLevel:"",pageNo:1,pageSize:5},isLoading:!1,buytypes:[],flowtypes:[],salers:[],intentLevels:[],customerList:[]}},computed:{stOptions:function(){var e=this;return{disabledDate:function(t){if(e.info.endFollowUpTime)return t.getTime()>u()(e.info.endFollowUpTime).valueOf()}}},etOptions:function(){var e=this;return{disabledDate:function(t){if(e.info.beginFollowUpTime)return t.getTime()<u()(e.info.beginFollowUpTime).valueOf()}}}},created:function(){var e=this;return r()(o.a.mark(function t(){var i,n,s;return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={w:[["category",2,"EQ"]],o:["id","esc"],p:[1,10]},t.next=3,e.api.getFlowtypeList(e.query.toEncode(e.newqry(i)));case 3:return e.flowtypes=t.sent,n={w:[["category",4,"EQ"]],o:["id","esc"],p:[1,20]},t.next=7,e.api.getBuysTypeList(e.query.toEncode(e.newqry(n)));case 7:return e.buytypes=t.sent,s={w:[["arg8",20002.1,"LK"],["arg6","销售","LK"]],o:["crtTm","esc"],p:[1,10]},t.next=11,e.api.getsalersList(e.query.toEncode(e.newqry(s)));case 11:return e.salers=t.sent,t.next=14,e.api.getWxIntentionLevel({p:{n:1,s:20}});case 14:e.intentLevels=t.sent;case 15:case"end":return t.stop()}},t,e)}))()},mounted:function(){console.log("mounted")},methods:{handleLoad:function(){this.isfirstload?(this.getList(this.info),this.isfirstload=!1,this.loading=!1):this.total>this.customerList.length?(this.info.pageNo+=1,this.getList(this.info),this.loading=!1):(this.loading=!1,this.finished=!0)},newqry:function(e){var t=this,i=this.query.new();return e.w.forEach(function(e){t.query.toW(i,e[0],e[1],e[2])}),this.query.toO(i,e.o[0],e.o[1]),this.query.toP(i,e.p[0],e.p[1]),i},onRefresh:function(){var e=this;this.customerList=[],this.finished=!1,this.loading=!0,this.info.pageNo=1,this.isfirstload=!0,this.handleLoad(),setTimeout(function(){e.isLoading=!1},1e3)},back:function(){this.until.back()},handleBuysType:function(e){},newcustomer:function(){this.until.href("/views/customermagt/new.html")},toDetail:function(e){this.until.href("/views/customermagt/detail.html?id="+e)},getList:function(e){var t=this;return r()(o.a.mark(function i(){var n;return o.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.api.getcustomerList(e);case 2:n=i.sent,t.customerList=[].concat(s()(t.customerList),s()(n.data.list)),console.table(t.customerList),t.total=n.page.total;case 6:case"end":return i.stop()}},i,t)}))()},handleQuery:function(){this.customerList=[],this.finished=!1,this.loading=!0,this.info.pageNo=1,this.isfirstload=!0,this.handleLoad()},startTimeChange:function(e){this.info.beginFollowUpTime=u()(e).format("YYYY-MM-DD")},endTimeChange:function(e){this.info.endFollowUpTime=u()(e).format("YYYY-MM-DD")}}}},826:function(e,t){},827:function(e,t){},984:function(e,t,i){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"container"}},[n("div",{staticClass:"title"},[n("img",{attrs:{src:i(30)},on:{click:e.back}}),e._v("\n    客户管理\n  ")]),e._v(" "),n("van-pull-refresh",{attrs:{"success-text":"刷新成功"},on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[n("div",{staticClass:"query"},[n("div",{staticClass:"left"},[n("div",{staticClass:"row1"},[n("el-input",{staticClass:"leftpart bg input",attrs:{placeholder:"姓名、手机号"},model:{value:e.info.nameAndphone,callback:function(t){e.$set(e.info,"nameAndphone",t)},expression:"info.nameAndphone"}}),e._v(" "),n("el-select",{staticClass:"rightpart bg",attrs:{clearable:"",filterable:"",placeholder:"购买类型"},on:{change:e.handleBuysType},model:{value:e.info.business,callback:function(t){e.$set(e.info,"business",t)},expression:"info.business"}},e._l(e.buytypes,function(e,t){return n("el-option",{key:t,attrs:{label:e.content,value:e.content}})}),1)],1),e._v(" "),n("div",{staticClass:"row2"},[n("el-select",{staticClass:"leftpart bg",attrs:{clearable:"",filterable:"",placeholder:"客流性质"},model:{value:e.info.nature,callback:function(t){e.$set(e.info,"nature",t)},expression:"info.nature"}},e._l(e.flowtypes,function(e){return n("el-option",{key:e.id,attrs:{value:e.content,label:e.content}})}),1),e._v(" "),n("el-select",{staticClass:"centerpart bg",attrs:{clearable:"",filterable:"",placeholder:"销售顾问"},model:{value:e.info.saler,callback:function(t){e.$set(e.info,"saler",t)},expression:"info.saler"}},e._l(e.salers,function(e){return n("el-option",{key:e.id,attrs:{label:e.arg7,value:e.arg7}})}),1),e._v(" "),n("el-select",{staticClass:"rightpart bg",attrs:{clearable:"",filterable:"",placeholder:"意向等级"},model:{value:e.info.intentionLevel,callback:function(t){e.$set(e.info,"intentionLevel",t)},expression:"info.intentionLevel"}},e._l(e.intentLevels,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.content}})}),1)],1),e._v(" "),n("div",{staticClass:"row3"},[n("el-date-picker",{staticClass:"picker son leftpart bg",attrs:{type:"date",placeholder:"开始日期","picker-options":e.stOptions},on:{change:e.startTimeChange},model:{value:e.info.beginFollowUpTime,callback:function(t){e.$set(e.info,"beginFollowUpTime",t)},expression:"info.beginFollowUpTime"}}),e._v(" "),n("el-date-picker",{staticClass:"picker son rightpart bg",attrs:{type:"date",placeholder:"结束日期","picker-options":e.etOptions},on:{change:e.endTimeChange},model:{value:e.info.endFollowUpTime,callback:function(t){e.$set(e.info,"endFollowUpTime",t)},expression:"info.endFollowUpTime"}})],1)]),e._v(" "),n("div",{staticClass:"right",on:{click:e.handleQuery}},[e._v("查询")])]),e._v(" "),n("van-list",{staticClass:"list",attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.handleLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.customerList,function(t,i){return n("van-cell",{key:i,staticClass:"item",on:{click:function(i){return e.toDetail(t.id)}}},[n("div",{staticClass:"level"},[e._v(e._s(t.intentionLevel))]),e._v(" "),n("div",{staticClass:"row1"},[n("div",{staticClass:"name"},[e._v(e._s(t.name))]),e._v(" "),1==t.sex?n("div",{staticClass:"type"},[e._v("(男)")]):2==t.sex?n("div",{staticClass:"type"},[e._v("(女)")]):n("div",{staticClass:"type"},[e._v("(未知)")])]),e._v(" "),n("div",{staticClass:"item_row"},[n("div",{staticClass:"key left"},[e._v("手机号:")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(t.phone))])]),e._v(" "),n("div",{staticClass:"item_row"},[n("div",{staticClass:"key left"},[e._v("微信号:")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(t.wxId))])]),e._v(" "),n("div",{staticClass:"item_row"},[n("div",{staticClass:"key left"},[e._v("下次跟进时间:")]),e._v(" "),n("div",{staticClass:"value"},[e._v(e._s(t.nextFollowUpTime))])])])}),1)],1),e._v(" "),n("div",{staticClass:"newbtn",on:{click:e.newcustomer}},[e._v("新增客户")])],1)},staticRenderFns:[]}}},[688]);