webpackJsonp([10],{102:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(23),a=n.n(o),i=n(11);n.n(i);e.default={data:function(){return{lable:"",myList:[],date:void 0,nextFollowDate:void 0,index:-1,current:{followWayValue:"",followWayLabel:""},followWay:"",typeSHow:!1,edit:!1,currentInfo:{},typeList:[{values:[{value:"1",lable:"电话拜访"},{value:"2",lable:"上门拜访"},{value:"3",lable:"其他"}],value:{value:"2",lable:"上门拜访"},defaultIndex:1}]}},components:{},created:function(){},mounted:function(){var t=new Date;this.date=new Date(t.getFullYear()-1+t.getMonth()+t.getDate())},methods:{getList:function(t){console.log("子组件"),this.myList=JSON.parse(t)},toEdit:function(t,e){console.log("去编辑"),console.log(t),this.edit=!0,this.index=e,this.current.followWayValue=t.followWay,1==this.current.followWayValue?this.current.followWayLabel="电话拜访":2==this.current.followWayValue?this.current.followWayLabel="上门拜访":3==this.current.followWayValue?this.current.followWayLabel="其他":this.current.followWayLabel="",this.current.followWayValue?this.typeList[0].defaultIndex=parseInt(this.current.followWayValue)-1:this.typeList[0].defaultIndex=0,this.typeList[0].value.value=this.typeList[0].values[this.typeList[0].defaultIndex].value,this.typeList[0].value.lable=this.typeList[0].values[this.typeList[0].defaultIndex].lable,this.currentInfo=JSON.parse(a()(t)),console.log(this.currentInfo),this.nextFollowDate=new Date(this.currentInfo.nextFollowDate)},typeChange:function(t,e){console.log(e),this.current.followWayValue=e[0].value,this.current.followWayLabel=e[0].lable},save:function(){var t=this,e=this.currentInfo;this.api.followUpd(e).then(function(e){0===e.code&&(t.$set(t.myList,t.index,t.currentInfo),n.i(i.Toast)("操作成功！"),t.edit=!1)})},cancel:function(){this.typeSHow=!1},typeConfirm:function(){this.currentInfo.followWay=this.current.followWayValue,this.typeSHow=!1},chooseTime:function(){this.$refs.picker.open()},handleConfirm:function(t){console.log(t);var e=this.until.formatDate(t);this.currentInfo.nextFollowDate=e.year+"-"+e.month+"-"+e.day}}}},362:function(t,e){},393:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("mt-datetime-picker",{ref:"picker",attrs:{startDate:t.date,type:"date"},on:{confirm:t.handleConfirm},model:{value:t.nextFollowDate,callback:function(e){t.nextFollowDate=e},expression:"nextFollowDate"}}),t._v(" "),t.typeSHow?n("div",{staticClass:"typeList"},[n("div",{staticClass:"top"},[n("p",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),n("p",{on:{click:t.typeConfirm}},[t._v("确定")])]),t._v(" "),n("mt-picker",{attrs:{slots:t.typeList,valueKey:"lable"},on:{change:t.typeChange}})],1):t._e(),t._v(" "),t.edit?n("div",{staticClass:"edit"},[n("div",{staticClass:"editMain"},[n("div",{staticClass:"input"},[n("p",[t._v("跟进方式：")]),t._v(" "),n("button",{on:{click:function(e){t.typeSHow=!0}}},[t._v(t._s(t.current.followWayLabel?t.current.followWayLabel:"请选择跟进方式")),n("span",{staticClass:"iconfont"},[t._v("")])])]),t._v(" "),n("div",{staticClass:"input"},[n("p",[t._v("跟进内容：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentInfo.followContent,expression:"currentInfo.followContent"}],attrs:{type:"text"},domProps:{value:t.currentInfo.followContent},on:{input:function(e){e.target.composing||t.$set(t.currentInfo,"followContent",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"input"},[n("p",[t._v("下次跟进时间：")]),t._v(" "),n("button",{on:{click:t.chooseTime}},[t._v(t._s(t.currentInfo.nextFollowDate?t.currentInfo.nextFollowDate:"跟进时间")),n("span",{staticClass:"iconfont"},[t._v("")])])]),t._v(" "),n("div",{staticClass:"input"},[n("p",[t._v("备注：")]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.currentInfo.rmks,expression:"currentInfo.rmks"}],attrs:{type:"text"},domProps:{value:t.currentInfo.rmks},on:{input:function(e){e.target.composing||t.$set(t.currentInfo,"rmks",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"button"},[n("p",{on:{click:function(e){t.edit=!1}}},[t._v("取消")]),t._v(" "),n("p",{on:{click:t.save}},[t._v("保存")])])])]):t._e(),t._v(" "),t._l(t.myList,function(e,o){return n("div",{key:o,staticClass:"followList"},[n("span",{staticClass:"iconfont",on:{click:function(n){return t.toEdit(e,o)}}},[t._v("")]),t._v(" "),n("div",{staticClass:"content"},[n("span",[t._v("跟进方式：")]),t._v(" "),1==e.followWay?n("p",[t._v("电话拜访")]):t._e(),t._v(" "),2==e.followWay?n("p",[t._v("上门拜访")]):t._e(),t._v(" "),3==e.followWay?n("p",[t._v("其他")]):t._e()]),t._v(" "),n("div",{staticClass:"content"},[n("span",[t._v("跟进内容：")]),n("p",[t._v(t._s(e.followContent))])]),t._v(" "),n("div",{staticClass:"content"},[n("span",[t._v("下次跟进时间：")]),t._v(" "),n("p",[t._v(t._s(e.nextFollowDate))])]),t._v(" "),n("div",{staticClass:"content"},[n("span",[t._v("备注：")]),n("p",[t._v(t._s(e.rmks))])])])})],2)},staticRenderFns:[]}},396:function(t,e,n){n(362);var o=n(7)(n(102),n(393),"data-v-3b98edb7",null);t.exports=o.exports},621:function(t,e,n){n(836);var o=n(7)(n(726),n(992),"data-v-655678e4",null);t.exports=o.exports},698:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(3),a=n(5),i=n(621),l=n.n(i);o.default.use(a.a),new o.default({render:function(t){return t(l.a)}}).$mount("#container")},726:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(10),a=n.n(o),i=n(23),l=n.n(i),s=n(9),r=n.n(s),c=n(396),u=n.n(c);e.default={data:function(){return{id:"",info:{},list:[{}]}},components:{followList:u.a},created:function(){},mounted:function(){this.id=this.until.getQueryString("id"),this.getInfo()},methods:{getInfo:function(){var t=this;return r()(a.a.mark(function e(){var n;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.api.followDetail(t.id);case 2:n=e.sent,console.log(n),t.info=n.followVo,t.list=n.followItemVoList,t.list.forEach(function(t){t.nextFollowDate=t.nextFollowDate?t.nextFollowDate.split(" ")[0]:""}),t.$refs.follow.getList(l()(t.list));case 8:case"end":return e.stop()}},e,t)}))()},toPage:function(){var t="@/maintain/creat.html?info="+l()(this.info);this.until.href(t)}}}},836:function(t,e){},992:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"container"}},[n("div",{staticClass:"main"},[n("div",{staticClass:"info"},[n("p",[n("span",[t._v("行驶证名：")]),t._v(t._s(t.info.linkMan)+"\n            ")]),t._v(" "),n("p",[n("span",[t._v("联系电话：")]),t._v(t._s(t.info.linkManPhone)+"\n            ")]),t._v(" "),1==t.info.drivingLicenseGender?n("p",[n("span",[t._v("性别：")]),t._v("男\n            ")]):t._e(),t._v(" "),0==t.info.drivingLicenseGender?n("p",[n("span",[t._v("性别：")]),t._v("女\n            ")]):t._e(),t._v(" "),n("p",[n("span",[t._v("民族：")]),t._v(t._s(t.info.drivingLicenseNation)+"\n            ")])]),t._v(" "),n("div",{staticClass:"record"},[n("follow-list",{ref:"follow"})],1)]),t._v(" "),n("button",{on:{click:t.toPage}},[t._v("新建跟进记录")])])},staticRenderFns:[]}}},[698]);