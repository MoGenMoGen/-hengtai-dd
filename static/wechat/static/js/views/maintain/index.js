webpackJsonp([4],{1e3:function(t,e,n){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"container"}},[s("div",{staticClass:"title"},[s("img",{attrs:{src:n(30)},on:{click:t.back}}),t._v(" "),t._v(" \n\t\t\t车保姆\n\t\t")]),t._v(" "),s("div",{staticClass:"menu"},[s("p",{class:{active:1==t.cd},on:{click:function(e){t.cd=1}}},[t._v("信息查询\n            ")]),t._v(" "),s("p",{class:{active:2==t.cd},on:{click:function(e){t.cd=2}}},[t._v("跟进记录")]),t._v(" "),s("p",{class:{active:3==t.cd},on:{click:function(e){t.cd=3}}},[t._v("服务作业")])]),t._v(" "),s("div",{staticClass:"main"},[1==t.cd?s("vip",{ref:"customer",attrs:{id:t.customerId}}):t._e(),t._v(" "),2==t.cd?s("follow-up"):t._e(),t._v(" "),3==t.cd?s("service"):t._e()],1)])},staticRenderFns:[]}},101:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n.n(s),o=n(38),a=n.n(o),l=n(9),c=n.n(l),r=n(65),u=n.n(r),v=n(37),d=n.n(v),_=n(12);n.n(_);e.default={props:["id"],data:function(){return{role:0,showAll:!1,myId:"",text:"",keys:"",pageNo:1,pageNum:10,total:0,allLoaded:!1,list:[],userInfo:{}}},components:{},created:function(){},mounted:function(){if(this.userInfo=JSON.parse(this.until.loGet("userInfo")),this.userInfo.userDepartRole){var t=!0,e=!1,n=void 0;try{for(var s,i=d()(u()(this.userInfo.userDepartRole));!(t=(s=i.next()).done);t=!0){var o=s.value;this.role=o}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}}this.myId=this.id,this.getList()},methods:{getInfo:function(t){this.userInfo=t;var e=!0,n=!1,s=void 0;try{for(var i,o=d()(u()(this.userInfo.userDepartRole));!(e=(i=o.next()).done);e=!0){var a=i.value;this.role=a}}catch(t){n=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw s}}},toSearch:function(){""==this.keys?n.i(_.Toast)("请输入关键字"):(this.myId="",this.showAll=!1,this.pageNo=1,this.list=[],this.getList())},getAll:function(){this.showAll=!0,this.keys="",this.pageNo=1,this.list=[],this.getList()},getList:function(){var t=this;return c()(i.a.mark(function e(){var n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("getVIPList"),s=t.query.new(),t.query.toW(s,"conditionInfo",t.keys,"EQ"),t.myId&&t.query.toW(s,"id",t.myId,"EQ"),t.showAll&&t.query.toW(s,"showAll","1","EQ"),t.query.toP(s,t.pageNo,t.pageNum),e.next=8,t.api.infoList(encodeURIComponent(t.query.toJsonStr(s)));case 8:o=e.sent,(n=t.list).push.apply(n,a()(o.data.list)),t.total=o.page.total,t.list.length===t.total?(console.log(o),console.log(t.list),console.log(t.total),console.log("数据已获取结束"),0==t.total?t.text="暂无数据":t.text="数据已加载完"):t.text="上拉加载更多";case 12:case"end":return e.stop()}},e,t)}))()},toCustomer:function(t){console.log("customer");var e=".@/maintain/customerDetail.html?id="+t;this.until.href(e)},toCar:function(t){console.log("car");var e="@/maintain/carDetail.html?id="+t;this.until.href(e)},loadBottom:function(){console.log("loadMore"),this.total>this.list.length&&(this.pageNo++,this.getList())}}}},103:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n.n(s),o=n(38),a=n.n(o),l=n(9),c=n.n(l),r=n(65),u=n.n(r),v=n(37),d=n.n(v),_=n(12);n.n(_);e.default={data:function(){return{role:0,showAll:!1,text:"",keys:"",pageNo:1,pageNum:10,total:0,allLoaded:!1,currentCd:"",tabList:[{cd:"",title:"全部"},{cd:1,title:"正常"},{cd:2,title:"成交"},{cd:3,title:"置换"},{cd:4,title:"收购"},{cd:5,title:"其他"}],list:[]}},components:{},created:function(){},mounted:function(){var t=JSON.parse(this.until.loGet("userInfo"));if(t.userDepartRole){var e=!0,n=!1,s=void 0;try{for(var i,o=d()(u()(t.userDepartRole));!(e=(i=o.next()).done);e=!0){var a=i.value;this.role=a}}catch(t){n=!0,s=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw s}}}this.getList()},watch:{currentCd:function(){this.list=[],this.pageNo=1,this.getList()}},methods:{getAll:function(){this.showAll=!0,this.keys="",this.pageNo=1,this.list=[],this.getList()},toSearch:function(){this.list=[],this.pageNo=1,this.getList()},getList:function(){var t=this;return c()(i.a.mark(function e(){var n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.query.new(),t.query.toW(s,"conditionInfo",t.keys,"EQ"),t.query.toW(s,"vehicleStatus",t.currentCd,"EQ"),t.query.toO(s,"crtTm","DESC"),t.query.toP(s,t.pageNo,t.pageNum),t.showAll&&t.query.toW(s,"showAll","1","EQ"),e.next=8,t.api.followList(encodeURIComponent(t.query.toJsonStr(s)));case 8:o=e.sent,console.log(o),console.log("llll"),(n=t.list).push.apply(n,a()(o.data.list)),t.total=o.page.total,t.$refs.loadmore.onBottomLoaded(),t.list.length==t.total?(t.allLoaded=!0,0==t.total?t.text="暂无数据":t.text="数据已加载完"):t.text="上拉加载更多";case 15:case"end":return e.stop()}},e,t)}))()},toPage:function(t){var e="@/maintain/detail.html?id="+t;this.until.href(e)},toCreat:function(){this.until.href("@/maintain/creat.html")},loadBottom:function(){this.total==this.list.length?this.allLoaded=!0:(this.pageNo++,this.getList())}}}},104:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(10),i=n.n(s),o=n(38),a=n.n(o),l=n(9),c=n.n(l),r=n(12);n.n(r);e.default={data:function(){return{text:"",keys:"",pageNo:1,pageNum:10,total:0,allLoaded:!1,currentCd:"",tabList:[{cd:"",title:"全部"},{cd:1,title:"待接单"},{cd:2,title:"服务中"},{cd:3,title:"已完成"}],list:[]}},components:{},created:function(){},mounted:function(){this.until.getQueryString("serviceCd")?this.currentCd=this.until.getQueryString("serviceCd"):this.getList()},watch:{currentCd:function(){console.log("currentId"),this.list=[],this.pageNo=1,this.getList()}},methods:{toSearch:function(){this.list=[],this.pageNo=1,this.getList()},getList:function(){var t=this;return c()(i.a.mark(function e(){var n,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=t.query.new(),t.query.toO(s,"crtTm","DESC"),t.query.toP(s,t.pageNo,t.pageNum),o={},t.query.toW(s,"conditionInfo",t.keys,"EQ"),3==t.currentCd?t.query.toW(s,"status","3,4,5","IN"):t.query.toW(s,"status",t.currentCd,"EQ"),e.next=8,t.api.servicelist(encodeURIComponent(t.query.toJsonStr(s)));case 8:o=e.sent,t.total=o.page.total,(n=t.list).push.apply(n,a()(o.data.list)),console.log(t.text),t.list.length==t.total?(t.allLoaded=!0,0==t.total?t.text="暂无数据":t.text="数据已加载完"):t.text="上拉加载更多";case 13:case"end":return e.stop()}},e,t)}))()},toPage:function(t){var e="";1==t.status&&(e="@/maintain/pendingDetail.html?id="+t.id),2==t.status&&(e="@/maintain/serviceDetail.html?id="+t.id),3!=t.status&&4!=t.status&&5!=t.status||(e="@/maintain/finished.html?id="+t.id),this.until.href(e)},loadBottom:function(){this.total==this.list.length?this.allLoaded=!0:(this.pageNo++,this.getList())}}}},360:function(t,e){},361:function(t,e){},363:function(t,e){},391:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keys,expression:"keys"}],attrs:{placeholder:"手机号、车牌号、车架后六位、品牌、客户姓名精准查询"},domProps:{value:t.keys},on:{input:function(e){e.target.composing||(t.keys=e.target.value)}}}),t._v(" "),n("div",[n("button",{on:{click:t.toSearch}},[t._v("查询")])]),t._v(" "),n("p",[t._v("共 "+t._s(t.total)+" 条作业工单")])]),t._v(" "),n("div",{staticClass:"tab"},t._l(t.tabList,function(e){return n("p",{key:e.cd,class:{active:t.currentCd==e.cd},on:{click:function(n){t.currentCd=e.cd}}},[t._v(t._s(e.title))])}),0),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottom,expression:"loadBottom"}],staticClass:"main",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.list,function(e,s){return n("div",{key:s,staticClass:"list",on:{click:function(n){return t.toPage(e)}}},[n("div",{staticClass:"content"},[n("p",[n("span",[t._v("联系人：")]),t._v(t._s(e.linkMan))]),t._v(" "),n("p",[n("span",[t._v("联系电话：")]),t._v(t._s(e.linkManPhone))]),t._v(" "),n("p",[n("span",[t._v("车牌号码：")]),t._v(t._s(e.vehicleNum))]),t._v(" "),n("p",[n("span",[t._v("品牌型号：")]),t._v(t._s(e.brandModel))]),t._v(" "),n("p",[n("span",[t._v("维保项目：")]),t._v(t._s(e.project))]),t._v(" "),e.assignTime?n("p",[n("span",[t._v("派单时间：")]),t._v(t._s(e.assignTime))]):t._e(),t._v(" "),e.finallyTime?n("p",[n("span",[t._v("完成时间：")]),t._v(t._s(e.finallyTime))]):t._e()]),t._v(" "),1==e.status?n("p",[t._v("\n          待接单\n          "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),2==e.status?n("p",[t._v("\n          待完成\n          "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),5==e.status?n("p",[t._v("\n          已完成\n          "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e()])}),t._v(" "),n("p",{staticClass:"tips"},[t._v(t._s(t.text))])],2)])},staticRenderFns:[]}},392:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keys,expression:"keys"}],attrs:{placeholder:"手机号、车牌号、车架后六位、品牌、客户姓名精准查询"},domProps:{value:t.keys},on:{input:function(e){e.target.composing||(t.keys=e.target.value)}}}),t._v(" "),n("div",[n("button",{on:{click:t.toSearch}},[t._v("查询")]),t._v(" "),1===this.role?n("button",{staticClass:"all",on:{click:t.getAll}},[t._v("查看所有")]):t._e()]),t._v(" "),n("p",[t._v("共 "+t._s(t.total)+" 条客户信息")])]),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottom,expression:"loadBottom"}],staticClass:"main",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.list,function(e,s){return n("div",{key:s,staticClass:"list"},[n("div",{on:{click:function(n){return t.toCustomer(e.customerVo.id)}}},[n("div",{staticClass:"content"},[n("p",[n("span",[t._v("行驶证姓名：")]),t._v(t._s(e.customerVo.drivingLicenseName))]),t._v(" "),n("p",[n("span",[t._v("联系电话：")]),t._v(t._s(e.customerVo.drivingLicenseLinkPhone))]),t._v(" "),n("p",[n("span",[t._v("联系人：")]),t._v(t._s(e.customerVo.linkMan))]),t._v(" "),n("p",[n("span",[t._v("联系电话：")]),t._v(t._s(e.customerVo.linkManPhone))])]),t._v(" "),n("span",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),t._l(e.vehicleCustomerVoList,function(e,s){return n("div",{key:s,on:{click:function(n){return t.toCar(e.id)}}},[n("div",{staticClass:"content"},[n("p",[n("span",[t._v("车辆信息：")]),t._v(t._s(e.vehicleNum))]),t._v(" "),n("p",[n("span",[t._v("保养时间：")]),t._v(t._s(e.nextMaintainDate))]),t._v(" "),n("p",[n("span",[t._v("商业险时间：")]),t._v(t._s(e.commercialInsuranceTimeTo))]),t._v(" "),n("p",[n("span",[t._v("交强险时间：")]),t._v(t._s(e.compulsoryInsuranceTimeTo))]),t._v(" "),n("p",[n("span",[t._v("年检时间：")]),t._v(t._s(e.annualInspectTime))])]),t._v(" "),n("span",{staticClass:"iconfont"},[t._v("")])])})],2)}),t._v(" "),n("p",{staticClass:"tips"},[t._v(t._s(t.text))])],2)])},staticRenderFns:[]}},394:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app"},[n("div",{staticClass:"search"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keys,expression:"keys"}],attrs:{placeholder:"手机号、车牌号、车架后六位、品牌、客户姓名精准查询"},domProps:{value:t.keys},on:{input:function(e){e.target.composing||(t.keys=e.target.value)}}}),t._v(" "),n("div",[n("button",{on:{click:t.toSearch}},[t._v("查询")]),t._v(" "),1===this.role?n("button",{staticClass:"all",on:{click:t.getAll}},[t._v("查看所有")]):t._e()]),t._v(" "),n("p",[t._v("共 "+t._s(t.total)+" 条记录")])]),t._v(" "),n("div",{staticClass:"tab"},t._l(t.tabList,function(e){return n("p",{key:e.cd,class:{active:t.currentCd==e.cd},on:{click:function(n){t.currentCd=e.cd}}},[t._v(t._s(e.title))])}),0),t._v(" "),n("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadBottom,expression:"loadBottom"}],staticClass:"main",attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}},[t._l(t.list,function(e,s){return n("div",{key:s,staticClass:"list",on:{click:function(n){return t.toPage(e.id)}}},[n("div",{staticClass:"content"},[n("p",[n("span",[t._v("车牌号码：")]),t._v(t._s(e.vehicleNum))]),t._v(" "),n("p",[n("span",[t._v("车架后六位：")]),t._v(t._s(e.vinLastSixNum))]),t._v(" "),n("p",[n("span",[t._v("客户名称：")]),t._v(t._s(e.linkMan))]),t._v(" "),n("p",[n("span",[t._v("联系电话：")]),t._v(t._s(e.linkManPhone))]),t._v(" "),n("p",[n("span",[t._v("上次跟进时间：")]),t._v(t._s(e.updTm))]),t._v(" "),n("p",[n("span",[t._v("下次跟进时间：")]),t._v(t._s(e.nextFollowDate))])]),t._v(" "),1==e.vehicleStatus?n("p",[t._v("\n            正常\n            "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),2==e.vehicleStatus?n("p",[t._v("\n            成交\n            "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),3==e.vehicleStatus?n("p",[t._v("\n            置换\n            "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),4==e.vehicleStatus?n("p",[t._v("\n            收购\n            "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e(),t._v(" "),5==e.vehicleStatus?n("p",[t._v("\n            其他\n            "),n("span",{staticClass:"iconfont"},[t._v("")])]):t._e()])}),t._v(" "),n("p",{staticClass:"tips"},[t._v(t._s(t.text))])],2)])},staticRenderFns:[]}},395:function(t,e,n){n(361);var s=n(7)(n(101),n(392),"data-v-265ba698",null);t.exports=s.exports},397:function(t,e,n){n(363);var s=n(7)(n(103),n(394),"data-v-ffbf0c7a",null);t.exports=s.exports},398:function(t,e,n){n(360);var s=n(7)(n(104),n(391),"data-v-19bf1bee",null);t.exports=s.exports},621:function(t,e,n){n(846);var s=n(7)(n(727),n(1e3),"data-v-7c135233",null);t.exports=s.exports},699:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(3),i=n(5),o=n(621),a=n.n(o);s.default.use(i.a),new s.default({render:function(t){return t(a.a)}}).$mount("#container")},727:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(23),i=n.n(s),o=n(12),a=(n.n(o),n(395)),l=n.n(a),c=n(397),r=n.n(c),u=n(398),v=n.n(u);e.default={data:function(){return{cd:1,customerId:"",userInfo:{}}},components:{vip:l.a,followUp:r.a,service:v.a},created:function(){},mounted:function(){},watch:{},methods:{login:function(){var t=this;dd.runtime.permission.requestAuthCode({corpId:"ding2c2e5aee012096b435c2f4657eb6378f",onSuccess:function(e){console.log(e),t.code=e.code,t.codeLogin()},onFail:function(t){console.log(t)}})},codeLogin:function(){var t=this;this.api.login(this.code).then(function(e){console.log(e),"0"==e.code?(t.until.loSave("token",e.data.token),t.userInfo=e.data.userInfo,t.until.loSave("userInfo",i()(e.data.userInfo)),t.$refs.customer.getInfo(t.userInfo)):n.i(o.Toast)(i()(e))})},back:function(){this.until.back()}}}},846:function(t,e){}},[699]);